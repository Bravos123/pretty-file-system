(function(){var y=function(){return{init:function(q,k){function n(c){c.preventDefault()}function d(c){var a=document.createElement("div");a.className="fileExplorerMiniMenu editFolderItem";c.appendChild(a)}this.createFolder=function(c){var a=document.createElement("div");a.addEventListener("contextmenu",n);var b=document.createElement("div");b.name="flexContainer";b.className="fileExplorerItem";var p=document.createElement("div");p.className="fileExplorerImagePreview fileExplorerFolderClosed fileExplorerContainBack";
b.appendChild(p);p=document.createElement("span");p.className="fileExplorerSpan";p.innerHTML=c.name;b.appendChild(p);k.params.disableInteraction||d(b);a.appendChild(b);c.elemContainer.style.display="none";c.elemContainer.style.marginLeft="16px";a.appendChild(c.elemContainer);return a};this.createFile=function(c){var a=document.createElement("div");a.className="fileExplorerItem";a.addEventListener("contextmenu",n);var b=document.createElement("div");b.removeAttribute("style");b.className="fileExplorerImagePreview fileExplorerContainBack";
void 0!==c.image&&""!==c.image.replace(/ /g,"")?b.style.backgroundImage="url('"+c.image+"')":b.className+=" fileExplorerFile";a.appendChild(b);b=document.createElement("span");b.className="fileExplorerSpan";b.innerHTML=c.name;a.appendChild(b);k.params.disableInteraction||d(a);return a}}}}();var w=function(){return{init:function(q,k,n,d){function c(a,c,d){for(var b=a.name,l=a.id,e=0;e<n.sharedResourceFolderJs.length;e++){var p=n.sharedResourceFolderJs[e].getHashes()[targetId].element;p.parentElement.removeChild(p)}for(e=
0;e<c.content.length;e++)if(c.content[e].id==a.id){c.content.splice(e,1);break}c=c.elemContainer.children;for(e=0;e<c.length;e++)if(c[e]==a.element){c[e].parentElement.removeChild(c[e]);break}if(d)k.onDeleteFile(b,l)}function a(b,d){for(var p=b.selectedItem.name,g=b.selectedItem.content.length-1;0!=g;g--)"folder"==b.selectedItem.content[g].type?a(b.selectedItem.content[g],d):c(b.selectedItem.content[g],b.selectedItem.content[g].parent,d);for(g=b.selectedItem.parent.content.length-1;0!=g;g--)"folder"==
b.selectedItem.parent.content[g].type&&b.selectedItem.parent.content[g].name==b.selectedItem.name&&b.selectedItem.parent.content.splice(g,1);for(g=0;g<n.namesOfFolders.length;g++)n.namesOfFolders[g]==p&&n.namesOfFolders.splice(g,1)}this["delete"]=function(b){void 0!=b.selectedItem&&void 0==b.selectedItem.root&&("folder"==b.selectedItem.type?q.confirm("Delete",'Are you sure you want to delete the folder "'+b.selectedItem.name+"\" and all it's content?",function(p){p&&(delete b.hashedEntries[b.selectedItem.id],
a(b,!0),c(b.selectedItem,b.selectedItem.parent,!0),b.selectedItem=d)}):q.confirm("Delete",'Are you sure you want to delete the file "'+b.selectedItem.name+'"?',function(a){a&&(delete b.hashedEntries[b.selectedItem.id],c(b.selectedItem,b.selectedItem.parent,!0),b.selectedItem=d)}))}}}}();var v=function(){return{init:function(q){function k(a,b){a.element.parentElement.removeChild(a.element);a.parent.content.splice(a.parent.content.indexOf(a),1);a.parent=void 0==b.content?b.parent:b;a.parent.elemContainer.appendChild(a.element);
a.parent.content.push(a)}function n(a){for(var b=a.element.parentElement,d=b.children,m=0,g=0;g<d.length;g++)if(d[g]==a.element){m=g-1;0>m&&(m=0);break}a.element.parentElement.removeChild(a.element);b.insertBefore(a.element,d[m]);c(a.parent.content,a,-1)}function d(a){for(var b=a.element.parentElement,d=b.children,m=0,g=0;g<d.length;g++)if(d[g]==a.element){m=g+1;m>d.length-1&&(m=d.length-1);break}a.element.parentElement.removeChild(a.element);b.insertBefore(a.element,d[m]);c(a.parent.content,a,1)}
this.moveItem=function(a,b,c){k(a,b);for(var d=0;d<c.sharedResourceFolderJs.length;d++){var g=c.sharedResourceFolderJs[d].getHashes()[b.id];void 0==g&&(g=c.sharedResourceFolderJs[d].getRoot());k(c.sharedResourceFolderJs[d].getHashes()[a.id],g)}};this.moveItemUp=function(a){n(a);for(var b=0;b<q.sharedResourceFolderJs.length;b++)n(q.sharedResourceFolderJs[b].getHashes()[a.id])};this.moveItemDown=function(a){d(a);for(var b=0;b<q.sharedResourceFolderJs.length;b++)d(q.sharedResourceFolderJs[b].getHashes()[a.id])};
var c=function(a,b,c){b=a.indexOf(b);c=b+c;0>c||c==a.length||(c=[b,c].sort(),a.splice(c[0],2,a[c[1]],a[c[0]]))}}}}();w=function(q,k){return{init:function(n,d,c,a){function b(){t=!0;f.element.getElementsByClassName("editFolderItem")[0].style.webkitFilter="none";f.element.getElementsByClassName("editFolderItem")[0].style.filter="none";f.element.getElementsByClassName("editFolderItem")[0].appendChild(r);for(var a=0;a<r.children.length;a++)r.children[a].className="fileExplorerMenuEntry fileExplorerMenuC1";
window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty();c.root.elemContainer.addEventListener("mouseup",m,!0);setTimeout(function(){document.body.addEventListener("mouseup",m,!1);document.body.addEventListener("touchend",m,!1)},45)}function p(){t=!1;try{f.element.getElementsByClassName("editFolderItem")[0].removeAttribute("style"),f.element.getElementsByClassName("editFolderItem")[0].removeChild(r)}catch(A){}document.body.removeEventListener("mouseup",
m,!1);document.body.removeEventListener("touchend",m,!1);c.root.elemContainer.removeEventListener("mouseup",m,!0)}function m(a){for(var b=r.children,c=!1,d=0;d<b.length;d++)if(a.target==b[d]){c=!0;break}c||a.target==r||p()}function g(a,b){var c=document.createElement("div");c.className="fileExplorerMenuEntry";c.innerHTML=a;c.addEventListener("mouseup",function(){b()});r.appendChild(c);return c}function l(a,b){if(c.params.onlyUniqueNames)for(var h=0;h<c.namesOfFiles.length;h++)if(c.namesOfFiles[h]==
b)return!0;for(h=0;h<a.length;h++)if(a[h].name==b)return!0;return!1}var e=new k.init(c),t=!1,f,u=new q.init(d,n,c,a);a=document.createElement("button");a.className="fileOptionButton";a.innerHTML="Cancel";a.onclick=function(){f.element.style.opacity="1";c.draging=void 0;c.movingIndicator.style.display="none";void 0!=c.buttonCreateItems&&(c.buttonCreateItems.style.display="block")};void 0!=c.movingIndicator&&c.movingIndicator.appendChild(a);a=document.createElement("button");a.className="fileOptionButton";
a.innerHTML="Place";a.onclick=function(){f.element.style.opacity="1";c.draging=void 0;c.movingIndicator.style.display="none";var a=!0;void 0==c.selectedItem.content?(f.id==c.selectedItem.parent.id&&(a=!1),void 0!=c.selectedItem.parent.root&&void 0!=f.parent.root&&(a=!1)):(f.id==c.selectedItem.id&&(a=!1),void 0!=c.selectedItem.root&&void 0!=f.parent.root&&(a=!1));var b=void 0==c.selectedItem.content?c.selectedItem.parent:c.selectedItem;for(var h=0;h<b.content.length;h++)if(b.content[h].name==f.name){a=
!1;b.content[h].id!=f.id&&d.alert("Alert","There already exists an item with that name in target folder.");break}a&&e.moveItem(f,c.selectedItem,c);void 0!=c.buttonCreateItems&&(c.buttonCreateItems.style.display="block");c.movingIndicator.className="fileExplorerMI"};void 0!=c.movingIndicator&&c.movingIndicator.appendChild(a);var r=document.createElement("div");r.className="fileExplorerMenu";g("Move",function(){r.getBoundingClientRect();p();f.element.style.opacity="0.36";c.mouseDrag=!1;c.draging=f;
void 0!=c.buttonCreateItems&&(c.buttonCreateItems.style.display="none");c.movingIndicator.style.display="inline-block"});g("Rename",function(){p();d.prompt("Rename","Enter a new name: ","Name",function(a){if(null!=a){for(var b=0,h=a;l(f.parent.content,h);)h=b+"_"+a,b++;for(a=0;a<c.sharedResourceFolderJs.length;a++)b=c.sharedResourceFolderJs[a].getHashes()[f.id],b.name=h,b.element.getElementsByTagName("span")[0].innerHTML=h;n.onRenameItem(f.name,f.id,h);f.name=h;f.element.getElementsByTagName("span")[0].innerHTML=
h}})});g("Delete",function(){p();c.selectedItem=f;u["delete"](c)});var x=g("Duplicate",function(){p();d.prompt("Copy","Enter a name for the copy: ",f.name,function(a){if(null!=a){a==f.name&&(a=f.name);for(var b=0,h=a;l(f.parent.content,h);)h=b+"_"+a,b++;c.selectedItem=f;n.sticker=f.image;n.createFile(h);n.onDuplicateFile(f.name,f.id,h,c.newlyCreatedFile.id)}})});g("Move up",function(){p();e.moveItemUp(f);n.onMoveItemUp(f.name,f.id)});g("Move down",function(){p();e.moveItemDown(f);n.onMoveItemDown(f.name,
f.id)});this.open=function(a){void 0==c.draging&&(c.holding=!1,t&&p(),f=a,b(),x.style.display="folder"==f.type?"none":"block")};this.closeMenu=function(){p()}}}}(w,v);var z=function(){return{init:function(){function q(a){k.style.top=a.clientY+"px";k.style.left=a.clientX+"px"}var k=document.createElement("div");k.className="fileExplorerGhost";k.style.zIndex="99999999";var n=document.createElement("div");n.className="fileExplorerImagePreview";k.appendChild(n);var d=document.createElement("span");d.className=
"fileExplorerSpan";k.appendChild(d);var c=!1;this.createGhost=function(a){d.innerHTML=a.name;k.style.width=a.element.offsetWidth+"px";"file"==a.type?(n.className="fileExplorerImagePreview fileExplorerContainBack",n.style.backgroundImage="url('"+a.element.getElementsByTagName("div")[0].src+"')"):"folder"==a.type&&(n.removeAttribute("style"),n.className="fileExplorerImagePreview fileExplorerContainBack fileExplorerFolderClosed");document.body.appendChild(k);document.body.addEventListener("mousemove",
q);c=!0};this.killGhost=function(){c&&(c=!1,document.body.removeEventListener("mousemove",q),document.body.removeChild(k))}}}}();v=function(q,k,n){return{init:function(d,c,a,b){function p(a,b){return void 0!=a.parent?a.parent.id==b.id?!0:p(a.parent,b):!1}function m(a){a.element.addEventListener("mousedown",function(c){c.stopPropagation();void 0==b.draging&&(b.holding=a.id,b.mouseDrag=!0)});a.element.addEventListener("mouseup",function(a){a.stopPropagation();b.holding=!1});a.element.addEventListener("mouseleave",
function(c){!1!==b.holding&&void 0==b.draging&&b.mouseDrag&&(b.draging=b.hashedEntries[b.holding],b.buttonCreateItems.style.display="none",f.createGhost(b.draging),u.closeMenu(),l(a,"fileExplorerItem"));b.holding=!1});a.element.addEventListener("mousemove",function(c){void 0!=b.draging&&b.mouseDrag?l(a,"fileExplorerDragLight"):b.selectedItem.id==a.id?l(a,"fileExplorerItemSelectedColor"):l(a,"fileExplorerItem")})}function g(a){void 0!=a&&void 0!=a.element&&l(a,"fileExplorerItem")}function l(a,b){"file"==
a.type?a.element.className!=b&&(a.element.className=b):"folder"==a.type&&a.element.className!=b&&(a.element.childNodes[0].className=b)}function e(a,b,c){a.addEventListener("mouseup",b,c);a.addEventListener("touchend",b,c)}var t=new k.init,f=new n.init,u=new q.init(c,a,b,d);d.elemContainer.addEventListener("mouseup",function(a){b.params.disableInteraction||(void 0!=b.draging&&1==b.mouseDrag&&t.moveItem(b.draging,d,b),b.draging=void 0,b.selectedItem=d,f.killGhost(),b.buttonCreateItems.style.display=
"block",d.elemContainer.className="fileExplorerRootCon")});this.addListenerFolder=function(a){var c="mouseup";"ontouchstart"in document.documentElement&&(c="touchend");a.element.addEventListener(c,function(c){c.stopPropagation();void 0==b.draging||0==b.mouseDrag?(g(b.selectedItem),a.open?(a.open=!1,a.elemContainer.style.display="none",c=a.element.getElementsByTagName("div")[0],c.getElementsByTagName("div")[0].className="fileExplorerImagePreview fileExplorerFolderClosed fileExplorerContainBack",c.className=
"fileExplorerItem",b.selectedItem=d):(a.open=!0,a.elemContainer.style.display="block",c=a.element.getElementsByTagName("div")[0],c.getElementsByTagName("div")[0].className="fileExplorerImagePreview fileExplorerFolderOpened fileExplorerContainBack",c.className="fileExplorerItemSelectedColor",b.selectedItem=void 0!=b.selectedItem?a:d)):(b.draging.id==a.id||p(a,b.draging)||t.moveItem(b.draging,a,b),l(a,"fileExplorerItem"),b.draging=void 0,b.selectedItem=d,f.killGhost(),b.buttonCreateItems.style.display=
"block")},!1);b.params.disableInteraction||m(a);void 0!=a.element.getElementsByClassName("editFolderItem")[0]&&e(a.element.getElementsByClassName("editFolderItem")[0],function(b){b.stopPropagation();u.open(a)},!1)};this.addListenerToFile=function(a){var k="mouseup";"ontouchstart"in document.documentElement&&(k="touchend");a.element.addEventListener(k,function(e){e.stopPropagation();b.holding=!1;void 0==b.draging||0==b.mouseDrag?(g(b.selectedItem),b.selectedItem.id==a.id&&void 0!=b.selectedItem?(b.selectedItem=
d,a.element.className="fileExplorerItem"):(b.selectedItem=void 0!=b.selectedItem?a:d,c.onClickFile(a.name,a.id,a.image),a.element.className="fileExplorerItemSelectedColor",b.selectedItem=a)):(b.draging.id==a.id||p(a,b.draging)||t.moveItem(b.draging,a,b),l(a,"fileExplorerItem"),b.draging=void 0,b.selectedItem=d,b.buttonCreateItems.style.display="block",f.killGhost())});b.params.disableInteraction||m(a);void 0!=a.element.getElementsByClassName("editFolderItem")[0]&&e(a.element.getElementsByClassName("editFolderItem")[0],
function(b){b.stopPropagation();u.open(a)},!1)}}}}(w,v,z);y=function(q,k){return{init:function(n,d,c,a){function b(){this.id;this.type="folder";this.name="";this.open=!1;this.parent;this.content=[];this.elemContainer=document.createElement("div");this.image;this.element}function p(){this.id;this.type="file";this.name="";this.parent;this.contains=void 0;this.metaData=[];this.onclick=void 0;this.element;this.image=void 0}function m(b,c,h,l){"folder"==b?d.prompt("Create folder","Enter a name for the folder:",
"Folder name",function(e){if(null!=e&&""!=e.replace(/ /g,"")){var f=!1;if(a.params.onlyUniqueNames)for(var k=0;k<a.namesOfFolders.length;k++)if(a.namesOfFolders[k]==e){f=!0;break}f?(f="An item with that name already exists",""==e.replace(/ /g,"")&&(f="Invalid name"),d.alert("Error",f,function(){h&&m(b,c,h,l)})):(g(e,!0),a.namesOfFolders.push(e))}else h&&m(b,c,h,l)}):d.prompt("Create "+a.params.itemName,"Enter a name:","File name",function(g){if(null!=g&&""!=g.replace(/ /g,"")){var k=!1;a.params.onlyUniqueNames&&
f(g)&&(k=!0);k?(k="An item with that name already exists",""==g.replace(/ /g,"")&&(k="Invalid name"),d.alert("Error",k,function(){h&&m(b,c,h,l)})):e(g,!0)}else h&&m(b,c,h,l)})}function g(e,l){void 0==a.selectedItem&&(a.selectedItem=n);var h=new b;h.id=a.idCounter;h.name=e;h.parentContainer=a.selectedItem;h.element=x.createFolder(h);if(void 0==a.selectedItem.content){if(u(a.selectedItem.parent.content,e)&&l){d.alert("Alert","There already exists a folder with that name in target folder.");return}a.selectedItem.parent.content.push(h);
h.parent=a.selectedItem.parent;a.selectedItem.parent.elemContainer.appendChild(h.element)}else{if(u(a.selectedItem.content,e)&&l){d.alert("Alert","There already exists a folder with that name in target folder.");return}a.selectedItem.content.push(h);h.parent=a.selectedItem;a.selectedItem.elemContainer.appendChild(h.element)}a.idCounter++;r.addListenerFolder(h);for(var f=0;f<a.sharedResourceFolderJs.length;f++)void 0!=h.parent.root?a.sharedResourceFolderJs[f].selectItemFromReference(void 0):a.sharedResourceFolderJs[f].selectItemFromReference(a.sharedResourceFolderJs[f].getHashes()[h.parent.id]),
a.sharedResourceFolderJs[f].createFolder(e);if(l)c.onCreatedFileSuccess();a.hashedEntries[h.id]=h;a.namesOfFolders.push(h.name);return h}function l(b,f){if(null==b)d.prompt("Create file","Enter a name for the file:","File name",function(a){null!=a&&""!=a.replace(/ /g,"")&&l(a,f)});else if(void 0==a.selectedItem&&(a.selectedItem=n),f)if(null!=c.onCreateNewFile)c.onCreateNewFile(b,a.idCounter,function(){return e(b,f)});else e(b,f);else e(b,f)}function e(b,e){var h=new p;h.image=c.sticker;h.id=a.idCounter;
h.name=b;h.contains=a.selectedItem;h.element=x.createFile(h);if(void 0==a.selectedItem.content){if(t(a.selectedItem.parent.content,b)&&e)return d.alert("Alert","There already exists an item with that name in target folder."),!1;a.selectedItem.parent.content.push(h);h.parent=a.selectedItem.parent;a.selectedItem.parent.elemContainer.appendChild(h.element)}else{if(t(a.selectedItem.content,b)&&e)return d.alert("Alert","There already exists an item with that name in target folder."),!1;a.selectedItem.content.push(h);
h.parent=a.selectedItem;a.selectedItem.elemContainer.appendChild(h.element)}if(e)c.onCreatedFileSuccess();a.idCounter++;r.addListenerToFile(h);for(var l=0;l<a.sharedResourceFolderJs.length;l++)void 0!=h.parent.root?a.sharedResourceFolderJs[l].selectItemFromReference(void 0):a.sharedResourceFolderJs[l].selectItemFromReference(a.sharedResourceFolderJs[l].getHashes()[h.parent.id]),a.sharedResourceFolderJs[l].sticker=c.sticker,a.sharedResourceFolderJs[l].createFile(b);c.sticker=void 0;a.hashedEntries[h.id]=
h;a.newlyCreatedFile=h;return!0}function t(b,c){if(a.params.onlyUniqueNames&&f(c))return!0;for(var e=0;e<b.length;e++)if(b[e].name==c)return console.log("here2 "),!0;return!1}function f(b){for(var c=Object.keys(a.hashedEntries),e=0;e<c.length;e++)if(a.hashedEntries[c[e]].name==b)return!0;return!1}function u(b,c){if(a.params.onlyUniqueNames)for(var e=0;e<a.namesOfFolders.length;e++)if(a.namesOfFolders[e]==c)return!0;for(e=0;e<b.length;e++)if(b[e].name==c)return!0;return!1}var r=new k.init(n,c,d,a),
x=new q.init(n,a);this.createFolder=function(a){return g(a,!1)};this.createFile=function(a,b){l(a,b)};this.userCreateItem=function(a,b,c,e){m(a,b,c,e)}}}}(y,v);v=function(){return{init:function(){function q(b,l,g,h){document.body.appendChild(m);a();f.value=g;f.style.display="block";r.style.display="inline";e.innerHTML=b;t.innerHTML=l;u.innerHTML="Okay";r.innerHTML="Cancel";u.onclick=function(){k()};r.onclick=function(){d(function(){document.body.removeChild(m);void 0!=h&&h(null)})};c();setTimeout(function(){var a=
document.getElementById("inputTextPrompt");a.setSelectionRange(0,a.value.length);a.focus()},25)}function k(){d(function(){document.body.removeChild(m);if(void 0!=p){p(f.value);for(var a=0;a<b.length;a++)b[a]()}})}function n(b,l,g){document.body.appendChild(m);a();f.style.display="none";r.style.display="inline";e.innerHTML=b;t.innerHTML=l;u.innerHTML="Yes";r.innerHTML="No";u.onclick=function(){d(function(){document.body.removeChild(m);g(!0)})};r.onclick=function(){d(function(){document.body.removeChild(m);
g(!1)})};c()}function d(a){g.style.transition="top 0.4s";g.style.top="-"+g.clientHeight+"px";m.style.opacity="0";setTimeout(function(){a()},400)}function c(){g.style.transition="top 0.4s";setTimeout(function(){g.style.top="0px"},50)}function a(){g.style.transition="";g.style.top="-"+g.clientHeight+"px";m.style.transition="opacity 0.5s";m.style.opacity="1"}var b=[],p,m=document.createElement("div");m.className="fileExplorerPromptBackdrop";var g=document.createElement("div");g.className="fileExplorerPromptTopColor";
var l=document.createElement("div");l.className="fileExplorerPromptContainer";var e=document.createElement("h2");e.className="fileExplorerPromptHeader";var t=document.createElement("p");t.className="fileExplorerPromptPara";var f=document.createElement("input");f.id="inputTextPrompt";f.type="text";f.className="fileExplorerParaInputText";var u=document.createElement("button");u.className="fileOptionButton";var r=document.createElement("button");r.className="fileOptionButton";r.style["float"]="right";
l.appendChild(e);l.appendChild(t);l.appendChild(f);l.appendChild(u);l.appendChild(r);g.appendChild(l);m.appendChild(g);this.setFunctionExecOnComplete=function(a){b.push(a)};this.prompt=function(a,b,c,e){p=e;void 0==e?q("",a,b,c):q(a,b,c,e)};f.addEventListener("keyup",function(a){13==(a.keyCode?a.keyCode:a.which)&&k()},!1);this.alert=function(b,l,g){document.body.appendChild(m);a();f.style.display="none";r.style.display="none";void 0==l?(e.innerHTML="Error:",t.innerHTML=b):(e.innerHTML=b,t.innerHTML=
l);u.innerHTML="Okay";r.innerHTML="Cancel";u.onclick=function(){d(function(){document.body.removeChild(m);void 0!=g&&g()})};r.onclick=function(){};c()};this.confirm=function(a,b,c){void 0==c?n("",a,b):n(a,b,c)}}}}();w=function(){return{init:function(q,k,n){this.parseMetaData=function(d,c){for(var a=0;a<c.length;a++)if("folder"==c[a].type){k.selectedItem=d;var b=n.createFolder(c[a].name);k.namesOfFolders.push(c[a].name);this.parseMetaData(b,c[a].contains)}else"file"==c[a].type&&(k.selectedItem=d,q.sticker=
c[a].image,n.createFile(c[a].name))};this.applyItemClass=function(d,c){"file"==d.type?d.element.className!=c&&(d.element.className=c):"folder"==d.type&&d.element.className!=c&&(d.element.childNodes[0].className=c)};this.deSelectItem=function(d){void 0!=d&&void 0!=d.element&&this.applyItemClass(d,"fileExplorerItem")};this.deSelect=function(){this.deSelectItem(k.selectedItem)};this.selectFile=function(d,c){this.deSelectItem(k.selectedItem);if(!("number"==typeof c&&0>c)){if("string"==typeof c)for(var a=
0;a<k.idCounter;a++){if(void 0!=k.hashedEntries[a]&&k.hashedEntries[a].name==c){var b=k.hashedEntries[a].id;break}}else b=c;void 0!=b&&void 0!=k.hashedEntries[b]&&"file"==k.hashedEntries[b].type&&(k.selectedItem=k.hashedEntries[b],this.applyItemClass(k.selectedItem,"fileExplorerItemSelectedColor"))}};this.checkForName=function(d,c,a){for(var b=0;b<d.length;b++){if("folder"==d[b].type)return this.checkForName(d[b].content,c,a);if("file"==d[b].type){if(c.v===a)return d[b].name;c.v++}}};this.parseContentToMeta=
function(d,c){for(var a=0;a<c.length;a++){if("folder"==c[a].type){var b={type:c[a].type,name:c[a].name,contains:[],id:c[a].id};this.parseContentToMeta(b.contains,c[a].content)}else"file"==c[a].type&&(b=void 0,void 0!=c[a].image&&(b=c[a].image),b={type:c[a].type,name:c[a].name,id:c[a].id,image:b});d.push(b)}};this.appendTopBarContainer=function(d,c,a,b){var k=document.createElement("div");k.className="fileExplorerTopCon";c&&(b.buttonCreateItems=document.createElement("div"),b.buttonCreateItems.style.textAlign=
"center",b.buttonCreateItems.style.width="100%",c=document.createElement("button"),c.className="fileOptionButton fileOptionCreateFile",c.innerHTML="Create "+a,c.addEventListener("mouseup",function(){q.createFile(null,!0)}),b.buttonCreateItems.appendChild(c),a=document.createElement("button"),a.className="fileOptionButton fileOptionCreateFolder",a.innerHTML="Create folder",a.addEventListener("mouseup",function(){n.userCreateItem("folder")}),b.buttonCreateItems.appendChild(a),k.appendChild(b.buttonCreateItems));
b.movingIndicator.className="fileExplorerMI";k.appendChild(b.movingIndicator);d.appendChild(k)}}}}();(function(q,k,n){return{init:function(){function d(){for(var b=c.elemContainer;b.firstChild;)b.removeChild(b.firstChild);a.idCounter=0;c.content.length=0;a.namesOfFolders.length=0;a.hashedEntries.length=0}var c={root:!0,content:[],elemContainer:document.createElement("div")};c.elemContainer.className="fileExplorerRootCon";var a={selectedItem:c,sharedResourceFolderJs:[],hashedEntries:[],movingIndicator:document.createElement("div"),
buttonCreateItems:void 0,root:c,draging:void 0,holding:!1,mouseDrag:!1,idCounter:0,params:void 0,namesOfFolders:[],newlyCreatedFile:void 0},b=new k.init,p={getContent:function(){return c.content},setDivContainer:function(a){a.appendChild(p.thisMainContainer)},thisMainContainer:void 0,getHashes:function(){return a.hashedEntries},setSharedResources:function(b){a.sharedResourceFolderJs.push(b)},getRoot:function(){return c},selectItemFromReference:function(b){a.selectedItem=b},setIdCounter:function(b){a.idCounter=
b},reset:function(){d()},sticker:void 0,updateFileImage:function(b,c){if("string"==typeof b){for(var e=!1,d=0;d<a.idCounter;d++)if(void 0!=a.hashedEntries[d]&&a.hashedEntries[d].name==b){var l=a.hashedEntries[d].id;e=!0;break}if(!e)return}else l=b;if(void 0!=a.hashedEntries[l]){if("file"==a.hashedEntries[l].type)for(a.hashedEntries[l].element.getElementsByTagName("div")[0].style.backgroundImage="url('"+c+"')",a.hashedEntries[l].image=c,d=0;d<a.sharedResourceFolderJs.length;d++)a.sharedResourceFolderJs[d].getHashes()[l].element.getElementsByTagName("div")[0].style.backgroundImage=
"url('"+c+"')",a.sharedResourceFolderJs[d].getHashes()[l].image=c;p.sticker=void 0}},getNameAtPosition:function(a){return g.checkForName(c.content,{v:0},a)},insertData:function(a){void 0==a?console.warn("Inserted data is undefined"):0!=a.length&&""!=a.replace(/ /g,"")&&(a=JSON.parse(a),g.parseMetaData(c,a))},getStructure:function(a){var b=[];g.parseContentToMeta(b,c.content);return!0===a?JSON.stringify(b):b},createFolder:function(a){return m.createFolder(a)},createFile:function(a,b){m.createFile(a,
b)},selectItem:function(a){g.selectFile(c,a)},deSelect:function(){g.deSelect()},flush:function(){d();for(var b=0;b<a.sharedResourceFolderJs.length;b++)a.sharedResourceFolderJs[b].reset()},prompt:function(a,c,d,f){b.prompt(a,c,d,f)},alert:function(a,c,d){b.alert(a,c,d)},confirm:function(a,c,d){b.confirm(a,c,d)},onCreatedFileSuccess:function(){},onMoveItemUp:function(a,b){},onMoveItemDown:function(a,b){},onDuplicateFile:function(a,b,c,d){},onClickFile:function(a,b,c){},onCreateNewFile:null,onRenameItem:function(a,
b,c){},onDeleteFile:function(a,b){}},m=new q.init(c,b,p,a),g=new n.init(p,a,m);this.getInit=function(b,d){d.itemName=void 0==d.itemName?"File":d.itemName;d.disableInteraction=void 0==d.disableInteraction?!1:d.disableInteraction;d.onlyUniqueNames=void 0==d.onlyUniqueNames?!1:d.onlyUniqueNames;d.createItemButtonOn=void 0==d.createItemButtonOn?!0:d.createItemButtonOn;d.mirror=void 0==d.mirror?null:d.mirror;null!=d.mirror&&(0==d.mirror.getRoot().content.length?(d.disableInteraction=!0,d.onlyUniqueNames=
!1,d.createItemButtonOn=!1):(d.mirror=null,console.log("Both file explorers must be empty before they can be connected through mirroring.")));a.params=d;void 0!=b?"string"==typeof b&&(b=document.getElementById(b)):b=document.createElement("div");p.thisMainContainer=b;var e=document.createElement("div");e.className="fileExplorerItemContainer fileExplorerSize";b.className="fileExplorerContainer fileExplorerImage";d.disableInteraction||g.appendTopBarContainer(b,d.createItemButtonOn,d.itemName,a);b.appendChild(e);
e.appendChild(c.elemContainer);null!=d.mirror&&d.mirror.setSharedResources(p);return p}}}})(y,v,w)})();